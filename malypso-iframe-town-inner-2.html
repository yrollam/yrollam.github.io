<html>

    <head>
        <style>
        body {
            background-color: rgba(50, 250, 0, 0.3);
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        .text {
            padding: 10px;
            font-size: 16px;
        }

        .subtext {
            font-size: 10px;
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
    </style>
        <script>// Turns out pendo's snippet requires at least one script tag in the head</script>
    </head>

    <body>
        <div class="text">
            Inner, inner iframe. <a href="/iframe-town-inner-3.html">(take me to
                inner-3)</a>
        </div>
        <div class="subtext">
            ...please, no more. I'm begging you
        </div>
        <textarea id="identify-json" style="width: 400px; height:
            400px;margin-left: 20px;"></textarea>
        <button id="set-identity">Set visitor ID</button>
        <script>
        console.log("version 2");
        function identify() {
            const json = document.querySelector('#identify-json').value;
            console.log("raw json is", json);
            try {
                const identity = JSON.parse(json);
                if(!window.__identifyPendoVisitor) {
                    console.error("window.__identifyPendoVisitor does not exist")
                    return;
                }

                window.__identifyPendoVisitor(identity);
            } catch(err) {
                console.error(err);
            }
        }

        document.querySelector('#set-identity').addEventListener('click', identify)
    </script>
    </body>

</html>